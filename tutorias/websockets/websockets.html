<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>Websocket</title>
</head>
<body>
	<input type="text" id="mensaje" /><br/>
	<button id="enviar_mensaje">Click</button>
	<hr>
	<div id="resultados"></div>

	<script type="text/javascript">
		var resultados = document.getElementById("resultados");

		websocket = new WebSocket('ws://echo.websocket.org');
		websocket.addEventListener('open', openConnection);
		websocket.addEventListener('message', recibirMensaje);

		document.getElementById("enviar_mensaje").addEventListener("click", enviarMensaje);

		function openConnection(){
			resultados.innerHTML = "Conectado";
		}

		function enviarMensaje(){
			websocket.send(document.getElementById("mensaje").value);
			document.getElementById("mensaje").value = "";
		}

		function recibirMensaje(mensaje){
			resultados.innerHTML += "<br />" + mensaje.data;
		}
	</script>
</body>
</html>